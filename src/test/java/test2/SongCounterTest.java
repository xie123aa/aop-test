package test2;/** * @Author: georgexie * @description: TODO * @Date: 2020/7/29 13:48 * @Version 1.0 */import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import static org.junit.Assert.assertEquals;@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(classes = SongCounterConfig.class)public class SongCounterTest {    @Autowired    private CompactDisc compactDisc;    @Autowired    //这个切面作为bean被传入，里面记录了方法被调用的记录    private SongCounter songCounter;    @Test    public void testSongCounter() {        //在这个方法执行之前，切入方法会获取它的参数，同时会记录调用次数        compactDisc.play(1);        compactDisc.play(2);        compactDisc.play(3);        compactDisc.play(3);        compactDisc.play(3);        compactDisc.play(3);        compactDisc.play(5);        compactDisc.play(5);        assertEquals(1, songCounter.getPlayCount(1));        assertEquals(1, songCounter.getPlayCount(2));        assertEquals(4, songCounter.getPlayCount(3));        assertEquals(0, songCounter.getPlayCount(4));        assertEquals(2, songCounter.getPlayCount(5));    }}